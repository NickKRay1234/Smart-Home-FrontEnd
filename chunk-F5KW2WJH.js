import{A as g,H as s,Ha as C,T as c,Va as u,Xa as y,a as f,f as p,i as d,m as h,n as m,q as i,u as a,y as b}from"./chunk-N76RHIJH.js";function l(n){n||(g(l),n=a(s));let t=new f(e=>n.onDestroy(e.next.bind(e)));return e=>e.pipe(h(t))}var v=class n{transform(t){if(t||t===0){let e=t.toString().split(""),r="";for(let o=e.length;o>0;o-=3)r+=e.splice(-3).join("")+" ";return r.split(" ").reverse().join(" ")}return""}static \u0275fac=function(e){return new(e||n)};static \u0275pipe=b({name:"price",type:n,pure:!0,standalone:!0})};var I=class n{apiUrl=u.apiUrl;httpClient=a(C);errorHandler=a(y);destroyRef=a(s);getCart(){return this.httpClient.get(`${this.apiUrl}ShoppingCart?id=as12`).pipe(p(t=>t.data),d(this.errorHandler.handleError("Cart error")))}addToCart(t){return this.httpClient.post(`${this.apiUrl}ShoppingCart`,t).pipe(p(e=>e.data),d(this.errorHandler.handleError("Wasn't added to cart")))}deleteCart(t){this.httpClient.delete(`${this.apiUrl}ShoppingCart?id=${t}`).pipe(l(this.destroyRef),m(e=>console.log(e))).subscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=i({token:n,factory:n.\u0275fac})};var K=n=>({items:n,clientSecret:u.clientId,id:"as12",paymentIntentId:"",deliveryMethodId:0});var q=class n{cartStorage=c([]);total=c(0);getCartStorage(){return this.cartStorage()}setCartStorage(t){this.cartStorage.set(t)}updateCartStorage(t){this.cartStorage.update(e=>{let r=!1;return e.forEach(o=>{o.productId===t.productId&&(o.quantity+=1,o.price=t.productPrice*o.quantity,r=!0)}),r?[...e]:[...e,{productId:t.productId,productName:t.productName,price:t.productPrice,quantity:1,pictureUrl:t.images[0].imageUrl,productPrice:t.productPrice}]})}decreaseCartStorage(t){this.cartStorage.update(e=>(e.forEach(r=>{if(r.productId===t&&r.quantity>1){let o=r.price/r.quantity;r.quantity-=1,r.price=r.quantity*o}}),this.countTotal(this.cartStorage()),[...e]))}increaseCartStorage(t){this.cartStorage.update(e=>(e.forEach(r=>{if(r.productId===t){let o=r.price/r.quantity;r.quantity+=1,r.price=r.quantity*o}}),this.countTotal(this.cartStorage()),[...e]))}deleteItemCartStorage(t){this.cartStorage.update(e=>e.filter(r=>r.productId!==t)),this.countTotal(this.cartStorage())}countTotal(t){let e=t.reduce((r,o)=>r+o.price,0);this.total.set(e)}getTotal(){return this.total()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=i({token:n,factory:n.\u0275fac,providedIn:"root"})};export{l as a,v as b,I as c,K as d,q as e};
